# CSI Presence Node Configuration
# ================================

# Hardware Settings
# Default: 2.4 GHz channel 1 @ 20 MHz â€” optimal for through-wall penetration.
# 2.4 GHz signals attenuate less through walls/obstacles than 5 GHz.
channel: 1                     # WiFi channel (1-14: 2.4GHz, 36-196: 5GHz)
bandwidth: 20                  # MHz (20/40/80/160)

# Processing Parameters
window_size: 1.0               # Seconds (temporal smoothing)
window_hop: 0.5                # Seconds (output rate)
variance_threshold: 5.0        # Motion sensitivity (CSI variance)
pca_threshold: 1.0             # Motion sensitivity (PCA eigenvalue)
rssi_delta: 2.0                # Direction threshold (dB L/R difference)

# Calibration (run python -m csi_node.calibrate to update)
# NOTE: path_loss_exponent should be positive (typically 2.0-4.0)
# A negative value indicates calibration error - recalibrate!
tx_power_dbm: -40.0            # RSSI at 1m (needs recalibration)
path_loss_exponent: 2.0        # Log-distance exponent (reset to default)
calibrated: false              # Marked false - needs recalibration
calibrated_at: null

# Baseline
baseline_file: data/baselines/baseline-20250917-114733.npz

# File Paths
log_file: ./data/csi_raw.log
output_file: ./data/presence_log.jsonl

# Logging
rotation_max_bytes: 1048576    # 1MB log rotation
rotation_interval_seconds: 600 # 10min time-based rotation
rotation_retention: 5          # Keep last 5 rotated files

# UDP Streaming (NEW)
udp_enabled: false             # Enable UDP broadcast of presence data
udp_host: "239.2.3.1"          # Multicast address (or unicast IP)
udp_port: 4243                 # Port for JSON streaming
udp_ttl: 1                     # Multicast TTL

# ATAK Integration (NEW)
atak_enabled: false            # Enable ATAK CoT streaming
atak_port: 4242                # Standard ATAK SA port
sensor_uid: "vantage-001"      # Unique sensor identifier
sensor_callsign: "VANTAGE-1"   # Display name in ATAK
sensor_lat: 0.0                # Sensor latitude (set for your location)
sensor_lon: 0.0                # Sensor longitude (set for your location)
sensor_heading: 0.0            # Sensor heading in degrees (0=N, 90=E)

# Pose Classification
pose_enabled: false            # Enable pose classification
pose_model: "models/wipose.joblib"  # Path to trained model

# Daemon Settings
daemon_log_file: "/var/log/csi-presence/daemon.log"
max_restarts: 10               # Max restart attempts before giving up
restart_delay: 5.0             # Seconds between restart attempts
debug: false                   # Enable debug logging
